[gd_scene format=3 uid="uid://bedfhp7nuwwaa"]

[ext_resource type="Script" uid="uid://d24g0o7sjxdof" path="res://scene/actors/monster/monster.gd" id="1_q5x8i"]
[ext_resource type="PackedScene" uid="uid://i283fcl214i6" path="res://assets/models/MainCharacter/monster.fbx" id="2_q5x8i"]
[ext_resource type="Animation" uid="uid://hswdllogjyly" path="res://animations/confused.res" id="3_bug3k"]
[ext_resource type="Animation" uid="uid://8i0737lhtu12" path="res://animations/mutantWalking.res" id="3_ox1q8"]
[ext_resource type="Animation" uid="uid://pp315u61msi6" path="res://animations/slowRun.res" id="3_utwfm"]
[ext_resource type="Animation" uid="uid://b0adc82l5waf4" path="res://animations/mutantRoar.res" id="3_wj5yr"]
[ext_resource type="Animation" uid="uid://c01o7mjdbykcx" path="res://animations/monsterRun.res" id="4_uqoaw"]
[ext_resource type="Animation" uid="uid://d0sf1g48gcmyf" path="res://animations/monster/mutantDying.res" id="5_srcid"]
[ext_resource type="Animation" uid="uid://d0wl577lm7lna" path="res://animations/monster/mutantSwipe.res" id="6_rdyi5"]

[sub_resource type="SphereShape3D" id="SphereShape3D_22xf5"]
radius = 1.4145331

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_q5x8i"]
radius = 0.34375
height = 1.7664261

[sub_resource type="SphereShape3D" id="SphereShape3D_uqoaw"]
radius = 0.14136271

[sub_resource type="SphereShape3D" id="SphereShape3D_rdyi5"]
radius = 0.12963606

[sub_resource type="AnimationLibrary" id="AnimationLibrary_ox1q8"]
_data = {
&"confused": ExtResource("3_bug3k"),
&"monsterRun": ExtResource("4_uqoaw"),
&"mutantDying": ExtResource("5_srcid"),
&"mutantRoar": ExtResource("3_wj5yr"),
&"mutantSwipe": ExtResource("6_rdyi5"),
&"mutantWalking": ExtResource("3_ox1q8"),
&"slowRun": ExtResource("3_utwfm")
}

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_uqoaw"]
radius = 0.6538086
height = 2.0009766

[sub_resource type="ViewportTexture" id="ViewportTexture_srcid"]
viewport_path = NodePath("Node3D/Sprite3D/SubViewport")

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_16p48"]
bg_color = Color(0.7490196, 0.19215687, 0.101960786, 1)

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_s4ul7"]
bg_color = Color(0, 0.70980394, 0.14901961, 1)

[node name="Monster" type="CharacterBody3D" unique_id=494537604]
script = ExtResource("1_q5x8i")
detection_radius = 10.0
attack_range = 1.6

[node name="DetectionArea" type="Area3D" parent="." unique_id=1683028985]

[node name="CollisionShape3D" type="CollisionShape3D" parent="DetectionArea" unique_id=246615337]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.3854523, 0)
visible = false
shape = SubResource("SphereShape3D_22xf5")

[node name="CollisionShape3D" type="CollisionShape3D" parent="." unique_id=677366057]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.016, 0.85528564, -0.045)
visible = false
shape = SubResource("CapsuleShape3D_q5x8i")

[node name="monster" parent="." unique_id=1357460165 instance=ExtResource("2_q5x8i")]
transform = Transform3D(-1, 0, -8.742278e-08, 0, 1, 0, 8.742278e-08, 0, -1, 0, 0.4396326, 0)

[node name="Skeleton3D" parent="monster" index="0" unique_id=1154821705]
bones/0/position = Vector3(-0.0006065475, 0.93725586, 0.00548843)
bones/0/rotation = Quaternion(-0.077813104, -0.01927479, 0.006836363, 0.9967583)
bones/1/rotation = Quaternion(-0.00916925, 0.016041536, -0.001668582, 0.9998279)
bones/2/rotation = Quaternion(0.007990921, 0.0033691342, -0.010861206, 0.9999035)
bones/3/rotation = Quaternion(0.05671508, 0.0027470065, -0.011002971, 0.99832606)
bones/4/rotation = Quaternion(0.007251203, -0.010367807, 0.03109217, 0.99943656)
bones/5/rotation = Quaternion(0.0053490694, -0.0050859293, -0.01851839, 0.9998013)
bones/11/rotation = Quaternion(0.64255005, 0.35089657, -0.54643726, 0.40670308)
bones/12/rotation = Quaternion(0.4810474, -0.01026255, -0.003384719, 0.87662804)
bones/13/rotation = Quaternion(-3.376014e-07, -7.3481175e-08, 0.08526775, 0.9963581)
bones/14/rotation = Quaternion(0.0074441764, 0.029883556, 0.0325869, 0.9989944)
bones/15/rotation = Quaternion(0.23662746, -0.022871207, 0.17540683, 0.95536214)
bones/16/rotation = Quaternion(-0.042360276, 0.021973401, -0.16559131, 0.98503923)
bones/17/rotation = Quaternion(-0.016157635, -0.06255677, -0.10366342, 0.9925117)
bones/19/rotation = Quaternion(0.13811846, -0.0076222997, 0.03550594, 0.9897497)
bones/20/rotation = Quaternion(0.26134944, 4.4375202e-08, -0.031530984, 0.96472913)
bones/21/rotation = Quaternion(0.1287137, -6.521887e-08, -0.015528922, 0.9915602)
bones/23/rotation = Quaternion(0.14293745, -0.0067732013, 0.028056415, 0.9893108)
bones/24/rotation = Quaternion(0.2595556, 1.3373715e-07, -0.03131467, 0.96522033)
bones/25/rotation = Quaternion(0.13567781, 8.890701e-08, -0.016369112, 0.9906179)
bones/27/rotation = Quaternion(0.18679307, -0.006960191, 0.009623941, 0.98232746)
bones/28/rotation = Quaternion(0.2097679, -1.7983409e-09, -0.025307816, 0.9774237)
bones/29/rotation = Quaternion(0.12487684, 6.1831855e-08, -0.015066112, 0.99205786)
bones/31/rotation = Quaternion(0.60515064, -0.34552407, 0.64142084, 0.32091326)
bones/32/rotation = Quaternion(0.422087, -0.13157791, -0.1009395, 0.89125806)
bones/33/rotation = Quaternion(2.6134066e-07, -4.2637375e-08, -0.099989995, 0.99498844)
bones/34/rotation = Quaternion(-0.031523414, -0.0152987065, -0.03077128, 0.9989121)
bones/35/rotation = Quaternion(0.26548326, -0.050683714, -0.07600053, 0.95977795)
bones/36/rotation = Quaternion(0.0010972398, 0.035383455, 0.079434015, 0.99621135)
bones/37/rotation = Quaternion(-0.042809404, 0.027645333, 0.110846505, 0.99253017)
bones/39/rotation = Quaternion(0.24477391, 0.0014390822, 0.03082929, 0.96908885)
bones/40/rotation = Quaternion(0.20009682, 1.2536105e-09, 0.02437879, 0.9794728)
bones/41/rotation = Quaternion(0.10753718, 6.818361e-08, 0.013101851, 0.99411476)
bones/43/rotation = Quaternion(0.22118205, -0.002628146, 0.045144968, 0.9741835)
bones/44/rotation = Quaternion(0.2430271, -8.660834e-09, 0.02960931, 0.9695675)
bones/45/rotation = Quaternion(0.1376025, 0.00019186818, 0.016792128, 0.9903452)
bones/47/rotation = Quaternion(0.25585034, 0.0015252428, 0.030563159, 0.96623194)
bones/48/rotation = Quaternion(0.19802268, 4.6814734e-09, 0.024126131, 0.9799005)
bones/49/rotation = Quaternion(0.06834907, -0.00015736921, 0.008317598, 0.9976269)
bones/51/rotation = Quaternion(0.034414094, 0.029104564, 0.998702, -0.023729347)
bones/52/rotation = Quaternion(-0.304386, 0.021497546, -0.0026559243, 0.9523025)
bones/53/rotation = Quaternion(0.64353466, -0.12937343, 0.11463837, 0.74564314)
bones/54/rotation = Quaternion(0.25435245, -0.086435415, -0.021667104, 0.96299756)
bones/56/rotation = Quaternion(-0.05256359, 0.05016757, 0.99553925, 0.060182743)
bones/57/rotation = Quaternion(-0.32168508, 0.057640754, -0.016933914, 0.94493896)
bones/58/rotation = Quaternion(0.63040495, 0.14982702, -0.08189236, 0.7572551)
bones/59/rotation = Quaternion(0.25318208, 0.08602121, 0.021668868, 0.96334296)

[node name="HandAttachment_L" type="BoneAttachment3D" parent="monster/Skeleton3D" index="1" unique_id=621189187]
transform = Transform3D(0.21048757, 0.041669823, -0.976708, -0.27447224, -0.95638597, -0.09995359, -0.93827504, 0.28911826, -0.1898702, 0.37968153, 0.84519625, 0.02489867)
bone_name = "mixamorig_LeftHand"
bone_idx = 14

[node name="HitBox_L" type="Area3D" parent="monster/Skeleton3D/HandAttachment_L" unique_id=136732586]
collision_layer = 16
collision_mask = 2
monitorable = false

[node name="CollisionShape3D" type="CollisionShape3D" parent="monster/Skeleton3D/HandAttachment_L/HitBox_L" unique_id=573073217]
transform = Transform3D(1, 0, 1.4901161e-08, 2.9802322e-08, 1, 3.7252903e-09, 0, 0, 1, 0.008292824, 0.0016416311, -0.03848058)
shape = SubResource("SphereShape3D_uqoaw")

[node name="HandAttachment_R" type="BoneAttachment3D" parent="monster/Skeleton3D" index="2" unique_id=100841968]
transform = Transform3D(0.3229623, -0.11104335, 0.93987495, 0.31173006, -0.92519426, -0.21642628, 0.8935994, 0.36288458, -0.2641874, -0.3696837, 0.8486272, 0.02082476)
bone_name = "mixamorig_RightHand"
bone_idx = 34

[node name="HitBox_R" type="Area3D" parent="monster/Skeleton3D/HandAttachment_R" unique_id=1728375550]
collision_layer = 16
collision_mask = 2
monitorable = false

[node name="CollisionShape3D" type="CollisionShape3D" parent="monster/Skeleton3D/HandAttachment_R/HitBox_R" unique_id=905270435]
transform = Transform3D(1, 0, 1.4901161e-08, 2.9802322e-08, 1, -7.450581e-09, 0, 0, 1, -0.009765923, -0.013495922, -0.028005362)
shape = SubResource("SphereShape3D_rdyi5")

[node name="AnimationPlayer" parent="monster" index="1" unique_id=101642766]
libraries/ = SubResource("AnimationLibrary_ox1q8")

[node name="HurtBox" type="Area3D" parent="monster" unique_id=1354047206]
collision_layer = 8
collision_mask = 0
monitoring = false

[node name="CollisionShape3D" type="CollisionShape3D" parent="monster/HurtBox" unique_id=368574417]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -4.9591007e-09, 0.939087, 0.056725502)
shape = SubResource("CapsuleShape3D_uqoaw")

[node name="NavigationAgent3D" type="NavigationAgent3D" parent="." unique_id=1227616958]
path_desired_distance = 0.5
target_desired_distance = 0.5
debug_enabled = true

[node name="LOSRay" type="RayCast3D" parent="." unique_id=1759751524]
enabled = false
target_position = Vector3(0, 1.5, 0)

[node name="LOSCheckTimer" type="Timer" parent="." unique_id=238432863]
wait_time = 0.3

[node name="Node3D" type="Node3D" parent="." unique_id=228352255]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 2.5, 0)

[node name="Sprite3D" type="Sprite3D" parent="Node3D" unique_id=1245322822]
pixel_size = 0.004
billboard = 1
render_priority = 1
texture = SubResource("ViewportTexture_srcid")

[node name="SubViewport" type="SubViewport" parent="Node3D/Sprite3D" unique_id=1812835168]
transparent_bg = true
size = Vector2i(200, 24)
render_target_update_mode = 4

[node name="ProgressBar" type="ProgressBar" parent="Node3D/Sprite3D/SubViewport" unique_id=1659112363]
offset_right = 200.0
offset_bottom = 25.0
theme_override_styles/background = SubResource("StyleBoxFlat_16p48")
theme_override_styles/fill = SubResource("StyleBoxFlat_s4ul7")
value = 100.0

[editable path="monster"]
